<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Description and Analysis · Simulation Construction Set</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="### 1. Add the constructor to the FallingBrickRobot class"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Description and Analysis · Simulation Construction Set"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ihmcrobotics.github.io/simulation-construction-set/index.html"/><meta property="og:description" content="### 1. Add the constructor to the FallingBrickRobot class"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/simulation-construction-set/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script><link rel="stylesheet" href="/simulation-construction-set/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/simulation-construction-set/"><img class="logo" src="/simulation-construction-set/img/running-man-logo.png" alt="Simulation Construction Set"/><h2 class="headerTitleWithLogo">Simulation Construction Set</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://ihmcrobotics.github.io" target="_self">IHMC Home</a></li><li class=""><a href="https://ihmcrobotics.github.io/docs/docshome.html" target="_self">All IHMC Docs</a></li><li class=""><a href="http://robots.ihmc.us/" target="_self">About IHMC</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Ground Contact Modeling</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/00-quickstart.html">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-requirements.html">Requirements</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-jar-releases.html">Using IHMC Open Robotics Software .jar releases with Maven/Gradle</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-local-maven-jar.html">Building .jars</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-depending-on-source.html">Depending Directly on the Source</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Using the SCS GUI</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/00-running-a-simulation.html">Running a simulation</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-change-camera-settings.html">Changing the Camera Settings</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-variable-view.html">SCS Variables</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-create-graph.html">Graphing Variables</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-toolbar-playback-and-graphs.html">Simulation Replay</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/05-data-buffer.html">Data Buffer</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/06-export-data.html">Exporting Data</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/07-snapshot.html">Export Snapshots and Video of the 3D View</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Creating a New Simulation</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/000-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-creating-a-new-project.html">Create a New Project</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-simple-pendulum-simulation.html">SimplePendulumSimulation.java</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-simple-pendulum-robot.html">SimplePendulumRobot.java</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-run-simulation.html">Run the simulation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Adding Control to a Simulation</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/001-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-adding-control-to-a-simulation.html">Adding control to a simulation</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-run-the-simulation.html">Run the simulation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Creating Links</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/002-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-creating-links.html">Creating Links</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-run-creating-links.html">Run the Simulation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Creating Robot with Multiple Joints</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/003-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-create-new-package.html">Create a New Package</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-mobile-simulation.html">Mobile Simulation</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-mobile-robot.html">Initial Variables in MobileRobot Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-mobile-robot-description.html">MobileRobot Class Description</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Ground Contact Modeling</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/004-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01a-create-new-package.html">Create a New Package</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-falling-brick-setup.html">Create a New Class FallingBrickSimulation</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-falling-brick-robot.html">Create a New Class FallingBrickRobot</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-wavy-ground-profile.html">Create a New Class WavyGroundProfile</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/simulation-construction-set/docs/05-description.html">Description and Analysis</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Implementing Closed-Chain Mechanisms Using External Force Points</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/005-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-implementing-closed-chain-mechanisms.html">Implementing Closed-Chain Mechanisms</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-flyball-governor-simulation.html">FlyballGovernorSimulation Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-flyball-governor-robot.html">FlyballGovernorRobot Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-flyball-controller.html">FlyballGovernorSimpleClosedLoopConstraintController Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/05-flyball-governor-common-control-parameters.html">FlyballGovernorCommonControlParameters Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/06-description-and-analysis.html">Description and Analysis</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Description and Analysis</h1></header><article><div><span><h3><a class="anchor" aria-hidden="true" id="1-add-the-constructor-to-the-fallingbrickrobot-class"></a><a href="#1-add-the-constructor-to-the-fallingbrickrobot-class" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Add the constructor to the FallingBrickRobot class</h3>
<pre><code class="hljs css languages- java">  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FallingBrickRobot</span><span class="hljs-params">()</span>
     </span>{
        <span class="hljs-keyword">super</span>(<span class="hljs-string">"FallingBrick"</span>);
         
        <span class="hljs-keyword">this</span>.setGravity(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, -G);
        <span class="hljs-comment">// create the brick as a floating joint</span>
        floatingJoint = <span class="hljs-keyword">new</span> FloatingJoint(<span class="hljs-string">"base"</span>, <span class="hljs-keyword">new</span> Vector3d(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>), <span class="hljs-keyword">this</span>);
        Link link1 = base(<span class="hljs-string">"base"</span>, YoAppearance.Red());
        floatingJoint.setLink(link1);
        <span class="hljs-keyword">this</span>.addRootJoint(floatingJoint);
        <span class="hljs-comment">// add ground contact points to the brick</span>
        GroundContactPoint gc1 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc1"</span>, <span class="hljs-keyword">new</span> Vector3d(BASE_L / <span class="hljs-number">2.0</span>, BASE_W / <span class="hljs-number">2.0</span>, BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc1);
        GroundContactPoint gc2 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc2"</span>, <span class="hljs-keyword">new</span> Vector3d(BASE_L / <span class="hljs-number">2.0</span>, -BASE_W / <span class="hljs-number">2.0</span>, BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc2);
        GroundContactPoint gc3 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc3"</span>, <span class="hljs-keyword">new</span> Vector3d(-BASE_L / <span class="hljs-number">2.0</span>, BASE_W / <span class="hljs-number">2.0</span>, BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc3);
        GroundContactPoint gc4 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc4"</span>, <span class="hljs-keyword">new</span> Vector3d(-BASE_L / <span class="hljs-number">2.0</span>, -BASE_W / <span class="hljs-number">2.0</span>, BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc4);
        GroundContactPoint gc5 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc5"</span>, <span class="hljs-keyword">new</span> Vector3d(BASE_L / <span class="hljs-number">2.0</span>, BASE_W / <span class="hljs-number">2.0</span>, -BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc5);
        GroundContactPoint gc6 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc6"</span>, <span class="hljs-keyword">new</span> Vector3d(BASE_L / <span class="hljs-number">2.0</span>, -BASE_W / <span class="hljs-number">2.0</span>, -BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc6);
        GroundContactPoint gc7 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc7"</span>, <span class="hljs-keyword">new</span> Vector3d(-BASE_L / <span class="hljs-number">2.0</span>, BASE_W / <span class="hljs-number">2.0</span>, -BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc7);
        GroundContactPoint gc8 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc8"</span>, <span class="hljs-keyword">new</span> Vector3d(-BASE_L / <span class="hljs-number">2.0</span>, -BASE_W / <span class="hljs-number">2.0</span>, -BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc8);
        GroundContactPoint gc9 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc9"</span>, <span class="hljs-keyword">new</span> Vector3d(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, BASE_H / <span class="hljs-number">2.0</span> + BASE_H), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc9);
        GroundContactPoint gc10 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc10"</span>, <span class="hljs-keyword">new</span> Vector3d(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, -BASE_H / <span class="hljs-number">2.0</span> - BASE_H), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc10);
        <span class="hljs-keyword">this</span>.setController(<span class="hljs-keyword">this</span>); <span class="hljs-comment">// tells the simulator to call the local doControl() method</span>
        <span class="hljs-comment">// instantiate ground contact model</span>
        GroundContactModel groundModel = <span class="hljs-keyword">new</span> LinearGroundContactModel(<span class="hljs-keyword">this</span>, <span class="hljs-number">1422</span>, <span class="hljs-number">150.6</span>, <span class="hljs-number">50.0</span>, <span class="hljs-number">1000.0</span>,
                                                                      <span class="hljs-keyword">this</span>.getRobotsYoVariableRegistry());
        <span class="hljs-comment">// GroundContactModel groundModel = new CollisionGroundContactModel(this, 0.5, 0.7);</span>
        GroundProfile3D profile = <span class="hljs-keyword">new</span> WavyGroundProfile();
        groundModel.setGroundProfile3D(profile);
        <span class="hljs-keyword">this</span>.setGroundContactModel(groundModel);
        initRobot();
        initControl();
     }
     <span class="hljs-comment">/**
      * This method returns a brick link instance.
      */</span>
     <span class="hljs-function"><span class="hljs-keyword">private</span> Link <span class="hljs-title">base</span><span class="hljs-params">(String name, AppearanceDefinition appearance)</span>
     </span>{
        Link ret = <span class="hljs-keyword">new</span> Link(name);
        ret.setMass(M1);
        ret.setMomentOfInertia(Ixx1, Iyy1, Izz1);
        ret.setComOffset(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>);
        LinkGraphicsDescription linkGraphics = <span class="hljs-keyword">new</span> LinkGraphicsDescription();
        linkGraphics.translate(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, -B1);
        <span class="hljs-comment">// linkGraphics.addCube((float)BASE_L, (float)BASE_W, (float)BASE_H, appearance);</span>
        <span class="hljs-comment">// linkGraphics.addCone((float)BASE_L,(float)BASE_W);</span>
        linkGraphics.addPyramidCube(BASE_L, BASE_W, BASE_H, BASE_H, appearance);
        ret.setLinkGraphics(linkGraphics);
        <span class="hljs-keyword">return</span> ret;
     }
     
     
     <span class="hljs-function"><span class="hljs-keyword">public</span> YoVariableRegistry <span class="hljs-title">getYoVariableRegistry</span><span class="hljs-params">()</span>
     </span>{
        <span class="hljs-keyword">return</span> registry;
     }
      
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span>
     </span>{     
     }
     <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getDescription</span><span class="hljs-params">()</span>
     </span>{
        <span class="hljs-keyword">return</span> getName();
     }
  }
</code></pre>
<p>Find the following 4 lines in <code>FallingBrickRobot</code> where the ground contact is defined:</p>
<pre><code class="hljs css languages- java">GroundContactModel groundModel = <span class="hljs-keyword">new</span> LinearGroundContactModel(<span class="hljs-keyword">this</span>, <span class="hljs-number">1422</span>, <span class="hljs-number">150.6</span>, <span class="hljs-number">50.0</span>, <span class="hljs-number">1000.0</span>, <span class="hljs-keyword">this</span>.getRobotsYoVariableRegistry());
GroundProfile3D profile = <span class="hljs-keyword">new</span> WavyGroundProfile();
groundModel.setGroundProfile3D(profile);
<span class="hljs-keyword">this</span>.setGroundContactModel(groundModel);
</code></pre>
<p>Lets look at it one line at a time.<br>
Notice that the <code>groundModel</code> is an instance of the class <code>LinearGroundContactModel</code> and the <code>GroundProfile</code> is an instance of the class <code>WavyGroundProfile()</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="2-next-add-the-method-initrobot-method-in-the-fallingbrickrobot-class"></a><a href="#2-next-add-the-method-initrobot-method-in-the-fallingbrickrobot-class" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Next add the method initRobot method in the FallingBrickRobot class</h3>
<p>This method simply sets the bricks position, velocity, and acceleration initially.</p>
<pre><code class="hljs css languages- java">     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initRobot</span><span class="hljs-params">()</span>
     </span>{
        q_qlength = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"q_qlength"</span>, registry);
        theta_x = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"theta_x"</span>, registry);
        t.set(<span class="hljs-number">0.0</span>);
        q_x = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_x"</span>);
        q_y = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_y"</span>);
        q_z = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_z"</span>);
        qd_x = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_x"</span>);
        qd_y = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_y"</span>);
        qd_z = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_z"</span>);
        qdd_x = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_x"</span>);
        qdd_y = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_y"</span>);
        qdd_z = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_z"</span>);
        q_qs = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_qs"</span>);
        q_qx = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_qx"</span>);
        q_qy = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_qy"</span>);
        q_qz = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_qz"</span>);
        qd_wx = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_wx"</span>);
        qd_wy = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_wy"</span>);
        qd_wz = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_wz"</span>);
        qdd_wx = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_wx"</span>);
        qdd_wy = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_wy"</span>);
        qdd_wz = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_wz"</span>);
        q_x.set(<span class="hljs-number">0.0</span>);
        q_y.set(<span class="hljs-number">0.0</span>);
        q_z.set(<span class="hljs-number">0.6</span>);
        qd_x.set(<span class="hljs-number">0.0</span>);
        qd_y.set(<span class="hljs-number">0.0</span>);
        qd_z.set(<span class="hljs-number">0.0</span>);
        q_qs.set(<span class="hljs-number">0.707</span>);
        q_qx.set(<span class="hljs-number">0.3</span>);
        q_qy.set(<span class="hljs-number">0.4</span>);
        q_qz.set(<span class="hljs-number">0.5</span>);
        qd_wx.set(<span class="hljs-number">0.0001</span>);
        qd_wy.set(<span class="hljs-number">1.0</span>);
        qd_wz.set(<span class="hljs-number">0.5001</span>);
     }
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="3-next-add-the-initcontrol-method-to-the-fallingbrickrobot-class"></a><a href="#3-next-add-the-initcontrol-method-to-the-fallingbrickrobot-class" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Next add the initControl method to the FallingBrickRobot class</h3>
<p>This method simply initializes the robots controller.</p>
<pre><code class="hljs css languages- java"> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initControl</span><span class="hljs-params">()</span>
     </span>{
        qdd2_wx = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"qdd2_wx"</span>, registry);
        qdd2_wy = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"qdd2_wy"</span>, registry);
        qdd2_wz = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"qdd2_wz"</span>, registry);
        energy = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"energy"</span>, registry);
     }
     
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doControl</span><span class="hljs-params">()</span>
          </span>{
             energy.set(  M1 * G * q_z.getDoubleValue() 
                          + <span class="hljs-number">0.5</span> * M1 * qd_x.getDoubleValue() * qd_x.getDoubleValue() 
                          + <span class="hljs-number">0.5</span> * M1 * qd_y.getDoubleValue() * qd_y.getDoubleValue() 
                          + <span class="hljs-number">0.5</span> * M1 * qd_z.getDoubleValue() * qd_z.getDoubleValue()
                          + <span class="hljs-number">0.5</span> * Ixx1 * qd_wx.getDoubleValue() * qd_wx.getDoubleValue() 
                          + <span class="hljs-number">0.5</span> * Iyy1 * qd_wy.getDoubleValue() * qd_wy.getDoubleValue()
                          + <span class="hljs-number">0.5</span> * Izz1 * qd_wz.getDoubleValue() * qd_wz.getDoubleValue());
                          
             qdd2_wx.set((Iyy1 - Izz1) / Ixx1 * qd_wy.getDoubleValue() * qd_wz.getDoubleValue());
             qdd2_wy.set((Izz1 - Ixx1) / Iyy1 * qd_wz.getDoubleValue() * qd_wx.getDoubleValue());
             qdd2_wz.set((Ixx1 - Iyy1) / Izz1 * qd_wx.getDoubleValue() * qd_wy.getDoubleValue());
          }
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="4-add-methods-to-wavygroundprofile-class"></a><a href="#4-add-methods-to-wavygroundprofile-class" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Add methods to WavyGroundProfile class</h3>
<p>Add the following methods to your WavyGroundProfile class:</p>
<pre><code class="hljs css languages- java">      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">heightAt</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z)</span>
      </span>{
         <span class="hljs-keyword">if</span> ((x &gt; xMin) &amp;&amp; (x &lt; xMax) &amp;&amp; (y &gt; yMin) &amp;&amp; (y &lt; yMax))
            <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span> * Math.exp(-Math.abs(<span class="hljs-number">2.0</span> * x)) * Math.exp(-Math.abs(<span class="hljs-number">2.0</span> * y)) * Math.sin(<span class="hljs-number">2.0</span> * Math.PI * <span class="hljs-number">0.7</span> * x);
         <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
      }
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">surfaceNormalAt</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Vector3d normal)</span>
      </span>{
         normal.x = <span class="hljs-number">0.0</span>;
         normal.y = <span class="hljs-number">0.0</span>;
         normal.z = <span class="hljs-number">1.0</span>;
      }
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">closestIntersectionTo</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Point3d point)</span>
      </span>{
         point.x = x;
         point.y = y;
         point.z = heightAt(x, y, z);
      }
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">closestIntersectionAndNormalAt</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Point3d point, Vector3d normal)</span>
      </span>{
         closestIntersectionTo(x, y, z, point);
         surfaceNormalAt(x, y, z, normal);
      }
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">checkIfInside</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Point3d intersectionToPack, Vector3d normalToPack)</span>
      </span>{
         closestIntersectionTo(x, y, z, intersectionToPack);
         surfaceNormalAt(x, y, z, normalToPack);
          
         <span class="hljs-keyword">return</span> (z &lt; intersectionToPack.getZ());
      }
       
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isClose</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z)</span>
      </span>{
         <span class="hljs-keyword">return</span> boundingBox.isInside(x, y, z);
      }
      <span class="hljs-function"><span class="hljs-keyword">public</span> BoundingBox3d <span class="hljs-title">getBoundingBox</span><span class="hljs-params">()</span>
      </span>{
         <span class="hljs-keyword">return</span> boundingBox;
      }
</code></pre>
<p>Since <code>WavyGroundProfile</code> implements the interface <code>GroundProfile</code>, it defines the methods:<br>
<code>heightAt</code>, <code>isClose</code>, <code>surfaceNormalAt</code>, <code>closestIntersectionTo</code>, <code>closestIntersectionAndNormalAt</code>, <code>getXmin</code>, <code>getXmax</code>, <code>getYmin</code>, <code>getYmax</code>, <code>getXTiles</code>, and <code>getYTiles</code>.</p>
<p>The point where the height of the ground is defined is in heightAt:<br>
<em><em>return 1.0 * Math.exp(-Math.abs(2.0</em>x)) * Math.exp(-Math.abs(2.0</em>y)) * Math.sin(2.0<em>Math.PI</em>0.7<em>x);</em>*</p>
<h3><a class="anchor" aria-hidden="true" id="5-change-the-profile-of-the-terrain"></a><a href="#5-change-the-profile-of-the-terrain" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Change the profile of the terrain</h3>
<p>Do this by changing the function <code>heightAt</code>. Run the simulation and see how the profile of the ground changed.</p>
<p>To read more about how to use and setup GroundProfile check out the <a href="https://ihmcrobotics.github.io/simulation-construction-set/docs/01-introduction-to-points.html">Ground Profile Interface API</a> page.</p>
<h3><a class="anchor" aria-hidden="true" id="6-examine-the-file-lineargroundcontactmodeljava"></a><a href="#6-examine-the-file-lineargroundcontactmodeljava" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Examine the file LinearGroundContactModel.java</h3>
<p>Since <code>LinearGroundContactModel</code> implements the interface <code>GroundContactModel</code>, it defines the method <code>doGroundContact</code>, where the ground contact forces are computed.</p>
<h3><a class="anchor" aria-hidden="true" id="7-study-the-dogroundcontact-and-resolvecontactforcezup-methods"></a><a href="#7-study-the-dogroundcontact-and-resolvecontactforcezup-methods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. Study the doGroundContact and resolveContactForceZUp methods</h3>
<p>These can be found in the file LinearStickSlipGroundContactModel.java</p>
<p>Notice that the ground is modeled as a linear spring-damper in the x and y directions and a non-linear spring and a linear damper in the z direction.
Using a non-linear (hardening) spring in the z direction is a standard way to prevent ground chatter or bounce while still simulating a stiff ground. This <code>GroundContactModel</code> is a simple one and does not take into consideration the surface normal of the ground, or ground slipping.
For this example simulation, that is ok, but in many instances, these effects are important. If so, then you should use one of the other ground contact models in the <code>com.yobotics.simulationconstructionset.utils</code> package, or create your own.</p>
<h3><a class="anchor" aria-hidden="true" id="8-experiment-with-different-values-of-ground-spring-and-damping-constants"></a><a href="#8-experiment-with-different-values-of-ground-spring-and-damping-constants" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. Experiment with different values of ground spring and damping constants</h3>
<p>Note that as you lower the stiffnesses, greater penetration into the ground will occur. As you lower the damping constants, vibrations occur longer.
However, if you increase the stiffness or damping constants too much, instabilities can occur due to numerical instabilities.</p>
<h3><a class="anchor" aria-hidden="true" id="9-as-a-general-rule-of-thumb"></a><a href="#9-as-a-general-rule-of-thumb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9. As a general rule of thumb</h3>
<p>Ground stiffness and damping are tuned experimentally until an acceptable ground penetration and bounce is achieved.
Try tuning the ground parameters for different ground penetration and bounce.</p>
<p>Various GroundProfiles and GroundContactModels are provided in the <code>com.yobotics.simulationconstructionset.util.ground</code> directory.
You should examine the source code of these files (found in SimulationConstructionSet\src)
in order to determine the model and profile best for your simulation, and to understand how to create your own custom ground contact model.</p>
<h3><a class="anchor" aria-hidden="true" id="full-code-for-classes"></a><a href="#full-code-for-classes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Full Code for Classes</h3>
<p><details>
<summary>FallingBrickSimulation</summary></p>
<pre><code class="hljs css languages- java"><span class="hljs-keyword">package</span> us.ihmc.exampleSimulations.fallingBrick  ;
<span class="hljs-keyword">import</span> us.ihmc.graphicsDescription.appearance.YoAppearance;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.SimulationConstructionSet;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.SimulationConstructionSetParameters;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.examples.FallingBrickRobot;
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FallingBrickSimulation</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">enum</span> GROUND_APPEARANCE
    {
        EARTH, STONE, ALUMINUM
    }
    SimulationConstructionSet sim;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FallingBrickSimulation</span><span class="hljs-params">()</span>
    </span>{
        GROUND_APPEARANCE appearance = GROUND_APPEARANCE.EARTH;
        FallingBrickRobot fallingBrick = <span class="hljs-keyword">new</span> FallingBrickRobot();
        sim = <span class="hljs-keyword">new</span> SimulationConstructionSet(fallingBrick, <span class="hljs-keyword">new</span> SimulationConstructionSetParameters(<span class="hljs-number">16342</span>));
        sim.setDT(<span class="hljs-number">0.001</span>, <span class="hljs-number">20</span>);
        sim.setCameraPosition(-<span class="hljs-number">1.5</span>, -<span class="hljs-number">2.5</span>, <span class="hljs-number">0.5</span>);
        sim.setCameraFix(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.4</span>);
        sim.setCameraTracking(<span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>);
        sim.setCameraDolly(<span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>);
        <span class="hljs-comment">// Set up some graphs:</span>
        sim.setupGraph(<span class="hljs-string">"q_z"</span>);
        sim.setupEntryBox(<span class="hljs-string">"qd_x"</span>);
        sim.setupEntryBox(<span class="hljs-string">"qd_y"</span>);
        sim.setupEntryBox(<span class="hljs-string">"qd_z"</span>);
        sim.setupEntryBox(<span class="hljs-string">"qd_wx"</span>);
        sim.setupEntryBox(<span class="hljs-string">"qd_wy"</span>);
        sim.setupEntryBox(<span class="hljs-string">"qd_wz"</span>);
        <span class="hljs-keyword">switch</span> (appearance)
        {
            <span class="hljs-keyword">case</span> EARTH:
                sim.setGroundAppearance(YoAppearance.EarthTexture());
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> STONE:
                sim.setGroundAppearance(YoAppearance.StoneTexture());
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> ALUMINUM:
                sim.setGroundAppearance(YoAppearance.AluminumMaterial());
                <span class="hljs-keyword">break</span>;
        }
        Thread myThread = <span class="hljs-keyword">new</span> Thread(sim);
        myThread.start();
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span>
    </span>{
        <span class="hljs-keyword">new</span> FallingBrickSimulation();
    }
}
</code></pre>
<p></details></p>
<p><details>
<summary>FallingBrickRobot</summary></p>
<pre><code class="hljs css languages- java"><span class="hljs-keyword">package</span> us.ihmc.exampleSimulations.fallingBrick;
<span class="hljs-keyword">import</span> javax.vecmath.Vector3d;
<span class="hljs-keyword">import</span> us.ihmc.jMonkeyEngineToolkit.GroundProfile3D;
<span class="hljs-keyword">import</span> us.ihmc.robotics.robotDescription.LinkGraphicsDescription;
<span class="hljs-keyword">import</span> us.ihmc.graphicsDescription.appearance.AppearanceDefinition;
<span class="hljs-keyword">import</span> us.ihmc.graphicsDescription.appearance.YoAppearance;
<span class="hljs-keyword">import</span> us.ihmc.robotics.dataStructures.variable.DoubleYoVariable;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.FloatingJoint;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.GroundContactModel;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.GroundContactPoint;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.Joint;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.Link;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.Robot;
<span class="hljs-keyword">import</span> us.ihmc.robotics.dataStructures.registry.YoVariableRegistry;
<span class="hljs-keyword">import</span> us.ihmc.robotics.robotController.RobotController;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.util.LinearGroundContactModel;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.util.ground.WavyGroundProfile;
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FallingBrickRobot</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Robot</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RobotController</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">773713164696806099L</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">double</span> BASE_H = <span class="hljs-number">0.1</span>, BASE_W = <span class="hljs-number">0.2</span>, BASE_L = <span class="hljs-number">0.3</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">double</span> B1 = BASE_H / <span class="hljs-number">2.0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">double</span> M1 = <span class="hljs-number">1.7</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">double</span> Ixx1 = <span class="hljs-number">0.1</span>, Iyy1 = <span class="hljs-number">0.5</span>, Izz1 = <span class="hljs-number">0.9</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">double</span> G = <span class="hljs-number">9.81</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> YoVariableRegistry registry = <span class="hljs-keyword">new</span> YoVariableRegistry(<span class="hljs-string">"FallingBrickController"</span>);
    <span class="hljs-comment">// position, velocity, and acceleration variables</span>
    DoubleYoVariable q_x, q_y, q_z, qd_x, qd_y, qd_z, qdd_x, qdd_y, qdd_z;
    DoubleYoVariable q_qs, q_qx, q_qy, q_qz, qd_wx, qd_wy, qd_wz, qdd_wx, qdd_wy, qdd_wz;
    DoubleYoVariable energy, q_qlength, theta_x;
    DoubleYoVariable qdd2_wx, qdd2_wy, qdd2_wz;
    Joint floatingJoint;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FallingBrickRobot</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">super</span>(<span class="hljs-string">"FallingBrick"</span>);

        <span class="hljs-keyword">this</span>.setGravity(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, -G);
        <span class="hljs-comment">// create the brick as a floating joint</span>
        floatingJoint = <span class="hljs-keyword">new</span> FloatingJoint(<span class="hljs-string">"base"</span>, <span class="hljs-keyword">new</span> Vector3d(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>), <span class="hljs-keyword">this</span>);
        Link link1 = base(<span class="hljs-string">"base"</span>, YoAppearance.Red());
        floatingJoint.setLink(link1);
        <span class="hljs-keyword">this</span>.addRootJoint(floatingJoint);
        <span class="hljs-comment">// add ground contact points to the brick</span>
        GroundContactPoint gc1 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc1"</span>, <span class="hljs-keyword">new</span> Vector3d(BASE_L / <span class="hljs-number">2.0</span>, BASE_W / <span class="hljs-number">2.0</span>, BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc1);
        GroundContactPoint gc2 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc2"</span>, <span class="hljs-keyword">new</span> Vector3d(BASE_L / <span class="hljs-number">2.0</span>, -BASE_W / <span class="hljs-number">2.0</span>, BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc2);
        GroundContactPoint gc3 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc3"</span>, <span class="hljs-keyword">new</span> Vector3d(-BASE_L / <span class="hljs-number">2.0</span>, BASE_W / <span class="hljs-number">2.0</span>, BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc3);
        GroundContactPoint gc4 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc4"</span>, <span class="hljs-keyword">new</span> Vector3d(-BASE_L / <span class="hljs-number">2.0</span>, -BASE_W / <span class="hljs-number">2.0</span>, BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc4);
        GroundContactPoint gc5 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc5"</span>, <span class="hljs-keyword">new</span> Vector3d(BASE_L / <span class="hljs-number">2.0</span>, BASE_W / <span class="hljs-number">2.0</span>, -BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc5);
        GroundContactPoint gc6 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc6"</span>, <span class="hljs-keyword">new</span> Vector3d(BASE_L / <span class="hljs-number">2.0</span>, -BASE_W / <span class="hljs-number">2.0</span>, -BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc6);
        GroundContactPoint gc7 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc7"</span>, <span class="hljs-keyword">new</span> Vector3d(-BASE_L / <span class="hljs-number">2.0</span>, BASE_W / <span class="hljs-number">2.0</span>, -BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc7);
        GroundContactPoint gc8 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc8"</span>, <span class="hljs-keyword">new</span> Vector3d(-BASE_L / <span class="hljs-number">2.0</span>, -BASE_W / <span class="hljs-number">2.0</span>, -BASE_H / <span class="hljs-number">2.0</span>), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc8);
        GroundContactPoint gc9 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc9"</span>, <span class="hljs-keyword">new</span> Vector3d(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, BASE_H / <span class="hljs-number">2.0</span> + BASE_H), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc9);
        GroundContactPoint gc10 = <span class="hljs-keyword">new</span> GroundContactPoint(<span class="hljs-string">"gc10"</span>, <span class="hljs-keyword">new</span> Vector3d(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, -BASE_H / <span class="hljs-number">2.0</span> - BASE_H), <span class="hljs-keyword">this</span>);
        floatingJoint.addGroundContactPoint(gc10);
        <span class="hljs-keyword">this</span>.setController(<span class="hljs-keyword">this</span>); <span class="hljs-comment">// tells the simulator to call the local doControl() method</span>
        <span class="hljs-comment">// instantiate ground contact model</span>
        GroundContactModel groundModel = <span class="hljs-keyword">new</span> LinearGroundContactModel(<span class="hljs-keyword">this</span>, <span class="hljs-number">1422</span>, <span class="hljs-number">150.6</span>, <span class="hljs-number">50.0</span>, <span class="hljs-number">1000.0</span>,
                <span class="hljs-keyword">this</span>.getRobotsYoVariableRegistry());
        <span class="hljs-comment">// GroundContactModel groundModel = new CollisionGroundContactModel(this, 0.5, 0.7);</span>
        GroundProfile3D profile = <span class="hljs-keyword">new</span> WavyGroundProfile();
        groundModel.setGroundProfile3D(profile);
        <span class="hljs-keyword">this</span>.setGroundContactModel(groundModel);
        initRobot();
        initControl();
    }
    <span class="hljs-comment">/**
     * This method returns a brick link instance.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> Link <span class="hljs-title">base</span><span class="hljs-params">(String name, AppearanceDefinition appearance)</span>
    </span>{
        Link ret = <span class="hljs-keyword">new</span> Link(name);
        ret.setMass(M1);
        ret.setMomentOfInertia(Ixx1, Iyy1, Izz1);
        ret.setComOffset(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>);
        LinkGraphicsDescription linkGraphics = <span class="hljs-keyword">new</span> LinkGraphicsDescription();
        linkGraphics.translate(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, -B1);
        <span class="hljs-comment">// linkGraphics.addCube((float)BASE_L, (float)BASE_W, (float)BASE_H, appearance);</span>
        <span class="hljs-comment">// linkGraphics.addCone((float)BASE_L,(float)BASE_W);</span>
        linkGraphics.addPyramidCube(BASE_L, BASE_W, BASE_H, BASE_H, appearance);
        ret.setLinkGraphics(linkGraphics);
        <span class="hljs-keyword">return</span> ret;
    }

    <span class="hljs-comment">/**
     * This method sets the initial positions, velocities, and accelerations of the brick
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initRobot</span><span class="hljs-params">()</span>
    </span>{
        q_qlength = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"q_qlength"</span>, registry);
        theta_x = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"theta_x"</span>, registry);
        t.set(<span class="hljs-number">0.0</span>);
        q_x = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_x"</span>);
        q_y = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_y"</span>);
        q_z = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_z"</span>);
        qd_x = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_x"</span>);
        qd_y = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_y"</span>);
        qd_z = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_z"</span>);
        qdd_x = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_x"</span>);
        qdd_y = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_y"</span>);
        qdd_z = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_z"</span>);
        q_qs = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_qs"</span>);
        q_qx = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_qx"</span>);
        q_qy = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_qy"</span>);
        q_qz = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"q_qz"</span>);
        qd_wx = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_wx"</span>);
        qd_wy = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_wy"</span>);
        qd_wz = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qd_wz"</span>);
        qdd_wx = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_wx"</span>);
        qdd_wy = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_wy"</span>);
        qdd_wz = (DoubleYoVariable)<span class="hljs-keyword">this</span>.getVariable(<span class="hljs-string">"qdd_wz"</span>);
        q_x.set(<span class="hljs-number">0.0</span>);
        q_y.set(<span class="hljs-number">0.0</span>);
        q_z.set(<span class="hljs-number">0.6</span>);
        qd_x.set(<span class="hljs-number">0.0</span>);
        qd_y.set(<span class="hljs-number">0.0</span>);
        qd_z.set(<span class="hljs-number">0.0</span>);
        q_qs.set(<span class="hljs-number">0.707</span>);
        q_qx.set(<span class="hljs-number">0.3</span>);
        q_qy.set(<span class="hljs-number">0.4</span>);
        q_qz.set(<span class="hljs-number">0.5</span>);
        qd_wx.set(<span class="hljs-number">0.0001</span>);
        qd_wy.set(<span class="hljs-number">1.0</span>);
        qd_wz.set(<span class="hljs-number">0.5001</span>);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initControl</span><span class="hljs-params">()</span>
    </span>{
        qdd2_wx = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"qdd2_wx"</span>, registry);
        qdd2_wy = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"qdd2_wy"</span>, registry);
        qdd2_wz = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"qdd2_wz"</span>, registry);
        energy = <span class="hljs-keyword">new</span> DoubleYoVariable(<span class="hljs-string">"energy"</span>, registry);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doControl</span><span class="hljs-params">()</span>
    </span>{
        energy.set(  M1 * G * q_z.getDoubleValue()
                + <span class="hljs-number">0.5</span> * M1 * qd_x.getDoubleValue() * qd_x.getDoubleValue()
                + <span class="hljs-number">0.5</span> * M1 * qd_y.getDoubleValue() * qd_y.getDoubleValue()
                + <span class="hljs-number">0.5</span> * M1 * qd_z.getDoubleValue() * qd_z.getDoubleValue()
                + <span class="hljs-number">0.5</span> * Ixx1 * qd_wx.getDoubleValue() * qd_wx.getDoubleValue()
                + <span class="hljs-number">0.5</span> * Iyy1 * qd_wy.getDoubleValue() * qd_wy.getDoubleValue()
                + <span class="hljs-number">0.5</span> * Izz1 * qd_wz.getDoubleValue() * qd_wz.getDoubleValue());

        qdd2_wx.set((Iyy1 - Izz1) / Ixx1 * qd_wy.getDoubleValue() * qd_wz.getDoubleValue());
        qdd2_wy.set((Izz1 - Ixx1) / Iyy1 * qd_wz.getDoubleValue() * qd_wx.getDoubleValue());
        qdd2_wz.set((Ixx1 - Iyy1) / Izz1 * qd_wx.getDoubleValue() * qd_wy.getDoubleValue());
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> YoVariableRegistry <span class="hljs-title">getYoVariableRegistry</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> registry;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span>
    </span>{
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getDescription</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> getName();
    }
}
</code></pre>
<p></details></p>
<p><details>
<summary>WavyGroundProfile</summary></p>
<pre><code class="hljs css languages- java"><span class="hljs-keyword">package</span> us.ihmc.exampleSimulations.fallingBrick;
<span class="hljs-keyword">import</span> javax.vecmath.Point3d;
<span class="hljs-keyword">import</span> javax.vecmath.Vector3d;
<span class="hljs-keyword">import</span> us.ihmc.jMonkeyEngineToolkit.GroundProfile3D;
<span class="hljs-keyword">import</span> us.ihmc.jMonkeyEngineToolkit.HeightMapWithNormals;
<span class="hljs-keyword">import</span> us.ihmc.robotics.geometry.BoundingBox3d;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WavyGroundProfile</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">GroundProfile3D</span>, <span class="hljs-title">HeightMapWithNormals</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> xMin = -<span class="hljs-number">2.0</span>, xMax = <span class="hljs-number">2.0</span>, yMin = -<span class="hljs-number">2.0</span>, yMax = <span class="hljs-number">2.0</span>, zMin = -<span class="hljs-number">10.0</span>, zMax = <span class="hljs-number">10.0</span>;

    <span class="hljs-keyword">private</span> BoundingBox3d boundingBox = <span class="hljs-keyword">new</span> BoundingBox3d(<span class="hljs-keyword">new</span> Point3d(xMin, yMin, zMin), <span class="hljs-keyword">new</span> Point3d(xMax, yMax, zMax));
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">WavyGroundProfile</span><span class="hljs-params">()</span>
    </span>{
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">heightAndNormalAt</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Vector3d normalToPack)</span>
    </span>{
        <span class="hljs-keyword">double</span> heightAt = heightAt(x, y, z);
        surfaceNormalAt(x, y, heightAt, normalToPack);
        <span class="hljs-keyword">return</span> heightAt;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">heightAt</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z)</span>
    </span>{
        <span class="hljs-keyword">if</span> ((x &gt; xMin) &amp;&amp; (x &lt; xMax) &amp;&amp; (y &gt; yMin) &amp;&amp; (y &lt; yMax))
            <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span> * Math.exp(-Math.abs(<span class="hljs-number">2.0</span> * x)) * Math.exp(-Math.abs(<span class="hljs-number">2.0</span> * y)) * Math.sin(<span class="hljs-number">2.0</span> * Math.PI * <span class="hljs-number">0.7</span> * x);
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">surfaceNormalAt</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Vector3d normal)</span>
    </span>{
        normal.x = <span class="hljs-number">0.0</span>;
        normal.y = <span class="hljs-number">0.0</span>;
        normal.z = <span class="hljs-number">1.0</span>;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">closestIntersectionTo</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Point3d point)</span>
    </span>{
        point.x = x;
        point.y = y;
        point.z = heightAt(x, y, z);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">closestIntersectionAndNormalAt</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Point3d point, Vector3d normal)</span>
    </span>{
        closestIntersectionTo(x, y, z, point);
        surfaceNormalAt(x, y, z, normal);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">checkIfInside</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z, Point3d intersectionToPack, Vector3d normalToPack)</span>
    </span>{
        closestIntersectionTo(x, y, z, intersectionToPack);
        surfaceNormalAt(x, y, z, normalToPack);

        <span class="hljs-keyword">return</span> (z &lt; intersectionToPack.getZ());
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isClose</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y, <span class="hljs-keyword">double</span> z)</span>
    </span>{
        <span class="hljs-keyword">return</span> boundingBox.isInside(x, y, z);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> BoundingBox3d <span class="hljs-title">getBoundingBox</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> boundingBox;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> HeightMapWithNormals <span class="hljs-title">getHeightMapIfAvailable</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
}
</code></pre>
<p></details></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/simulation-construction-set/docs/04-wavy-ground-profile.html">← Create a New Class WavyGroundProfile</a><a class="docs-next button" href="/simulation-construction-set/docs/005-summary.html">Summary →</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/simulation-construction-set/" class="nav-home"><img src="/simulation-construction-set/img/running-man-logo.png" alt="Simulation Construction Set" width="66" height="58"/></a><div><h5>Docs</h5><a href="https://ihmcrobotics.github.io/ihmc-open-robotics-software/docs/quickstarthome.html">Quick Start</a><a href="https://ihmcrobotics.github.io/docs/docshome.html">Software Documentation</a></div><div><h5>Community</h5><a href="https://github.com/ihmcrobotics">GitHub</a><a href="https://www.facebook.com/TheIHMC" target="_blank" rel="noreferrer noopener">Facebook</a><a href="https://twitter.com/ihmcrobotics" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.youtube.com/user/DRCihmcRobotics" target="_blank" rel="noreferrer noopener">YouTube</a></div></section><section class="copyright">Copyright © 2018 IHMC Robotics</section></footer></div></body></html>