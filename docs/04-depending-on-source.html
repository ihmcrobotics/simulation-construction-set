<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Depending Directly on the Source · Simulation Construction Set</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="For the IHMCOpenRoboticsSoftware and [ihmc-build](https://github.com/ihmcrobotics/ihmc-build) to work correctly when depending directly on the source, the Gradle project hierarchy needs to take a particular form. Let&#x27;s assume you have a directory structure such as:"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Depending Directly on the Source · Simulation Construction Set"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ihmcrobotics.github.io/simulation-construction-set/index.html"/><meta property="og:description" content="For the IHMCOpenRoboticsSoftware and [ihmc-build](https://github.com/ihmcrobotics/ihmc-build) to work correctly when depending directly on the source, the Gradle project hierarchy needs to take a particular form. Let&#x27;s assume you have a directory structure such as:"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/simulation-construction-set/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script><link rel="stylesheet" href="/simulation-construction-set/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/simulation-construction-set/"><img class="logo" src="/simulation-construction-set/img/running-man-logo.png" alt="Simulation Construction Set"/><h2 class="headerTitleWithLogo">Simulation Construction Set</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://ihmcrobotics.github.io" target="_self">IHMC Home</a></li><li class=""><a href="https://ihmcrobotics.github.io/docs/docshome.html" target="_self">All IHMC Docs</a></li><li class=""><a href="http://robots.ihmc.us/" target="_self">About IHMC</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Getting Started</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/00-quickstart.html">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-requirements.html">Requirements</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-jar-releases.html">Using IHMC Open Robotics Software .jar releases with Maven/Gradle</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-local-maven-jar.html">Building .jars</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/simulation-construction-set/docs/04-depending-on-source.html">Depending Directly on the Source</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Using the SCS GUI</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/00-running-a-simulation.html">Running a simulation</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-change-camera-settings.html">Changing the Camera Settings</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-variable-view.html">SCS Variables</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-create-graph.html">Graphing Variables</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-toolbar-playback-and-graphs.html">Simulation Replay</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/05-data-buffer.html">Data Buffer</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/06-export-data.html">Exporting Data</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/07-snapshot.html">Export Snapshots and Video of the 3D View</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Creating a New Simulation</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/000-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-creating-a-new-project.html">Create a New Project</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-simple-pendulum-simulation.html">SimplePendulumSimulation.java</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-simple-pendulum-robot.html">SimplePendulumRobot.java</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-run-simulation.html">Run the simulation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Adding Control to a Simulation</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/001-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-adding-control-to-a-simulation.html">Adding control to a simulation</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-run-the-simulation.html">Run the simulation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Creating Links</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/002-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-creating-links.html">Creating Links</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-run-creating-links.html">Run the Simulation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Creating Robot with Multiple Joints</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/003-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-create-new-package.html">Create a New Package</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-mobile-simulation.html">Mobile Simulation</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-mobile-robot.html">Initial Variables in MobileRobot Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-mobile-robot-description.html">MobileRobot Class Description</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Ground Contact Modeling</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/004-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01a-create-new-package.html">Create a New Package</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-falling-brick-setup.html">Create a New Class FallingBrickSimulation</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-falling-brick-robot.html">Create a New Class FallingBrickRobot</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-wavy-ground-profile.html">Create a New Class WavyGroundProfile</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/05-description.html">Description and Analysis</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Implementing Closed-Chain Mechanisms Using External Force Points</h3><ul><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/005-summary.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/01-implementing-closed-chain-mechanisms.html">Implementing Closed-Chain Mechanisms</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/02-flyball-governor-simulation.html">FlyballGovernorSimulation Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/03-flyball-governor-robot.html">FlyballGovernorRobot Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/04-flyball-controller.html">FlyballGovernorSimpleClosedLoopConstraintController Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/05-flyball-governor-common-control-parameters.html">FlyballGovernorCommonControlParameters Class</a></li><li class="navListItem"><a class="navItem" href="/simulation-construction-set/docs/06-description-and-analysis.html">Description and Analysis</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Depending Directly on the Source</h1></header><article><div><span><p>For the IHMCOpenRoboticsSoftware and <a href="https://github.com/ihmcrobotics/ihmc-build">ihmc-build</a> to work correctly when depending directly on the source, the Gradle project hierarchy needs to take a particular form. Let's assume you have a directory structure such as:</p>
<pre><code class="hljs">.&lt;your Gradle root project&gt;
├── build.gradle
├── settings.gradle
├── ProjectA
├── ProjectB
├── IHMCOpenRoboticsSoftware
│   └── Acsell
│   └── Atlas
│   └── CommonWalkingControlModules
├── ProjectC
└── ...
</code></pre>
<p>You will need to modify the <strong>root project</strong> <code>settings.gradle</code> to set up your project hierarchy correctly. The important thing is that you will need both <code>:IHMCOpenRoboticsSoftware</code> as well as the various <code>:IHMCOpenRoboticsSoftware:&lt;Sub Project&gt;</code> items in the Gradle hierarchy, even though IHMCOpenRoboticsSoftware doesn't contain any of its own Java source. This can be tedious to set up by hand, so we usually write our settings.gradle to do some naive dynamic generation of dependencies.</p>
<p>An example <code>settings.gradle</code> similar to what our developers use could look like the following:</p>
<pre><code class="hljs css languages- groovy">rootProject.name = <span class="hljs-string">'_Foo'</span> <span class="hljs-comment">// Your root project name goes here</span>

<span class="hljs-keyword">def</span> codeDir = rootProject.projectDir

<span class="hljs-keyword">def</span> isGradleProjectFilter = <span class="hljs-keyword">new</span> FilenameFilter() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">boolean</span> accept(File dir, String name) {
        File f = <span class="hljs-keyword">new</span> File(dir, name).getCanonicalFile();
        <span class="hljs-keyword">return</span> f.isDirectory() &amp;&amp; <span class="hljs-keyword">new</span> File(f, <span class="hljs-string">"build.gradle"</span>).exists();
    }
}

codeDir.list(isGradleProjectFilter).each { mainProject -&gt;
    include <span class="hljs-string">"${mainProject}"</span>

    project(<span class="hljs-string">":${mainProject}"</span>).projectDir.list(isGradleProjectFilter).each { subProject -&gt;
        include <span class="hljs-string">"${mainProject}:${subProject}"</span>
    }
}
</code></pre>
<p>If this is set up correctly, you can either apply the <code>ihmc-build</code> plugin from the <a href="https://plugins.gradle.org/plugin/us.ihmc.gradle.ihmc-build">Plugin portal</a> and use the dependency resolver methods exposed by the build extensions, or you can manually identify dependencies on projects using the normal Gradle syntax for project dependencies. A sample build.gradle dependency block:</p>
<pre><code class="hljs css languages- groovy">dependencies {
  compile project(<span class="hljs-string">':IHMCOpenRoboticsSoftware:IHMCJavaToolkit'</span>) <span class="hljs-comment">// normal Gradle way of doing things</span>
}

<span class="hljs-comment">/* OR */</span>

dependencies {
  compile ihmc.getProjectDependency(<span class="hljs-string">':IHMCJavaToolkit'</span>) <span class="hljs-comment">// ihmc-build way of doing things</span>
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/simulation-construction-set/docs/03-local-maven-jar.html">← Building .jars</a><a class="docs-next button" href="/simulation-construction-set/docs/00-running-a-simulation.html">Running a simulation →</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/simulation-construction-set/" class="nav-home"><img src="/simulation-construction-set/img/running-man-logo.png" alt="Simulation Construction Set" width="66" height="58"/></a><div><h5>Docs</h5><a href="https://ihmcrobotics.github.io/ihmc-open-robotics-software/docs/quickstarthome.html">Quick Start</a><a href="https://ihmcrobotics.github.io/docs/docshome.html">Software Documentation</a></div><div><h5>Community</h5><a href="https://github.com/ihmcrobotics">GitHub</a><a href="https://www.facebook.com/TheIHMC" target="_blank" rel="noreferrer noopener">Facebook</a><a href="https://twitter.com/ihmcrobotics" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.youtube.com/user/DRCihmcRobotics" target="_blank" rel="noreferrer noopener">YouTube</a></div></section><section class="copyright">Copyright © 2018 IHMC Robotics</section></footer></div></body></html>